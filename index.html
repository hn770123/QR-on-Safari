<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        /* å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        /* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ãƒ©ãƒ™ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« */
        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-weight: bold;
        }

        /* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
            margin-bottom: 20px;
        }

        textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }

        /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 20px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #45a049;
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* ãƒ­ã‚°ã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .log-area {
            background-color: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        /* ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .log-message {
            margin: 5px 0;
            padding: 5px;
            animation: fadeIn 0.5s;
        }

        /* ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¨®é¡åˆ¥ã‚¹ã‚¿ã‚¤ãƒ« */
        .log-info {
            color: #2196F3;
        }

        .log-success {
            color: #4CAF50;
            font-weight: bold;
        }

        .log-error {
            color: #f44336;
            font-weight: bold;
        }

        /* QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .qr-area {
            text-align: center;
            padding: 20px;
            background-color: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 5px;
            min-height: 100px;
        }

        /* QRã‚³ãƒ¼ãƒ‰ã®ç”»åƒã‚¹ã‚¿ã‚¤ãƒ« */
        #qrcode {
            display: inline-block;
            margin-top: 10px;
        }

        /* éè¡¨ç¤ºã‚¯ãƒ©ã‚¹ */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“± QRã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>

        <!-- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢ -->
        <div>
            <label for="textInput">QRã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹æ–‡å­—åˆ—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š</label>
            <textarea id="textInput" rows="4" placeholder="ä¾‹ï¼šhttps://example.com ã¾ãŸã¯ ä»»æ„ã®ãƒ†ã‚­ã‚¹ãƒˆ"></textarea>
        </div>

        <!-- QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒœã‚¿ãƒ³ -->
        <button id="generateBtn">QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ</button>

        <!-- ãƒ­ã‚°è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div>
            <label>å®Ÿè¡Œãƒ­ã‚°ï¼š</label>
            <div id="logArea" class="log-area"></div>
        </div>

        <!-- QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div>
            <label>ç”Ÿæˆã•ã‚ŒãŸQRã‚³ãƒ¼ãƒ‰ï¼š</label>
            <div class="qr-area">
                <div id="qrcode"></div>
            </div>
        </div>
    </div>

    <!-- QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ -->
    <script src="qrcode.min.js"></script>

    <script>
        /**
         * QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
         * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€
         * å‡¦ç†ã®å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’ãƒ­ã‚°ã¨ã—ã¦è¡¨ç¤ºã™ã‚‹
         */

        // DOMè¦ç´ ã®å–å¾—
        const textInput = document.getElementById('textInput');
        const generateBtn = document.getElementById('generateBtn');
        const logArea = document.getElementById('logArea');
        const qrcodeDiv = document.getElementById('qrcode');

        /**
         * ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ ã™ã‚‹é–¢æ•°
         * @param {string} message - ãƒ­ã‚°ã«è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
         * @param {string} type - ãƒ­ã‚°ã®ç¨®é¡ï¼ˆinfo, success, errorï¼‰
         */
        function addLog(message, type = 'info') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-message log-${type}`;
            const timestamp = new Date().toLocaleTimeString('ja-JP');
            logEntry.textContent = `[${timestamp}] ${message}`;
            logArea.appendChild(logEntry);
            // ãƒ­ã‚°ã‚¨ãƒªã‚¢ã‚’è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            logArea.scrollTop = logArea.scrollHeight;
        }

        /**
         * é…å»¶å‡¦ç†ã‚’è¡Œã†é–¢æ•°ï¼ˆãƒ­ã‚°è¡¨ç¤ºã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°èª¿æ•´ç”¨ï¼‰
         * @param {number} ms - å¾…æ©Ÿæ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰
         * @returns {Promise} æŒ‡å®šæ™‚é–“å¾Œã«è§£æ±ºã•ã‚Œã‚‹Promise
         */
        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        /**
         * QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®å®Ÿè¡Œé–¢æ•°
         * å„ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ã€æœ€å¾Œã«QRã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹
         */
        async function generateQRCode() {
            try {
                // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                generateBtn.disabled = true;
                
                // ãƒ­ã‚°ã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢
                logArea.innerHTML = '';
                
                // QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢
                qrcodeDiv.innerHTML = '';

                // ã‚¹ãƒ†ãƒƒãƒ—1: å‡¦ç†é–‹å§‹
                addLog('QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‡¦ç†ã‚’é–‹å§‹ã—ã¾ã™...', 'info');
                await delay(500);

                // ã‚¹ãƒ†ãƒƒãƒ—2: å…¥åŠ›å€¤ã®å–å¾—
                addLog('å…¥åŠ›å€¤ã‚’å–å¾—ä¸­...', 'info');
                await delay(500);
                const inputText = textInput.value.trim();
                
                // ã‚¹ãƒ†ãƒƒãƒ—3: å…¥åŠ›å€¤ã®æ¤œè¨¼
                addLog('å…¥åŠ›å€¤ã‚’æ¤œè¨¼ä¸­...', 'info');
                await delay(500);
                
                if (!inputText) {
                    addLog('ã‚¨ãƒ©ãƒ¼: æ–‡å­—åˆ—ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                    generateBtn.disabled = false;
                    return;
                }
                
                addLog(`å…¥åŠ›å€¤: "${inputText}" (${inputText.length}æ–‡å­—)`, 'success');
                await delay(500);

                // ã‚¹ãƒ†ãƒƒãƒ—4: QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®æº–å‚™
                addLog('QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆæœŸåŒ–ä¸­...', 'info');
                await delay(500);

                // ã‚¹ãƒ†ãƒƒãƒ—5: QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆå®Ÿè¡Œ
                addLog('QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆä¸­...', 'info');
                await delay(800);

                // QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
                new QRCode(qrcodeDiv, {
                    text: inputText,
                    width: 256,
                    height: 256,
                    colorDark: '#000000',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.H
                });

                // ã‚¹ãƒ†ãƒƒãƒ—6: å®Œäº†
                await delay(300);
                addLog('QRã‚³ãƒ¼ãƒ‰ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'success');
                addLog('ç”»é¢ä¸‹éƒ¨ã«QRã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™', 'success');

            } catch (error) {
                // ã‚¨ãƒ©ãƒ¼å‡¦ç†
                addLog(`ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}`, 'error');
                console.error('QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
            } finally {
                // ãƒœã‚¿ãƒ³ã‚’å†åº¦æœ‰åŠ¹åŒ–
                generateBtn.disabled = false;
            }
        }

        /**
         * ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
         * QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹
         */
        generateBtn.addEventListener('click', generateQRCode);

        /**
         * Enterã‚­ãƒ¼ã§ã‚‚ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
         * ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢å†…ã§Ctrl+Enterã‚’æŠ¼ã™ã¨QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
         */
        textInput.addEventListener('keydown', (event) => {
            if (event.ctrlKey && event.key === 'Enter') {
                generateQRCode();
            }
        });

        // åˆæœŸãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        addLog('QRã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒèµ·å‹•ã—ã¾ã—ãŸ', 'info');
        addLog('æ–‡å­—åˆ—ã‚’å…¥åŠ›ã—ã¦ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', 'info');
    </script>
</body>
</html>
